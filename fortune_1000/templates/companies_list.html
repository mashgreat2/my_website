{% extends "base.html" %}
{% load static %}
{% load humanize %}
{% load fortune_1000_template_extra %}

{% block base_head %}

{% endblock base_head %}

{% block content %}
  <div class="container">
    <div class="card my-2">
      <h5 class="card-title mx-2 my-2"> This is a list of Nasdaq companies with their Stock Data.</h5>
      <p class="card-text mx-2 my-2">
        The initial data of company name and stock symbol has been extracted from a CSV file provided by Nasdaq.
      </p>
      <p class="card-text mx-2 my-2">
        The goal of this project is to learn and gain practice on how to load data into a Django model, persist it in
        a postgres db, and show the data in a View. Next step is to integrate this page of information with IEX API which will provides
        stock price data for given companies.
        The goals of this project described below:
      </p>
      <ul>
        <li> Load data into Django model and show it in a View (Done)</li>
        <li> Fix missing stock symbol data from by searching Nasdaq
          <a href="https://www.nasdaq.com/screening/company-list.aspx"> DB</a>.
          Then update the models in Django DB.(Done)
        </li>
        <li> Integrate this page with <a href="https://iextrading.com/developer">IEX API</a>
          to show stock price info(Done)</li>
        <li> Paginate the View ( To Be Done )</li>
        <li> Add searching functionality ( To Be Done )</li>
        <li> Add Detail view for each company where you can see additional information
          like historic stock price data for different time periods. ( To Be Done )</li>
      </ul>
    </div>
    <h3>Stocks data test:</h3>
      <div class="card my-3 mx-2">
{#        <div class="card-header border-0">#}
{#          <img src="/static/site_images/placeholder.png" alt="company_img_placeholder", width="200rem;">#}
{#        </div>#}
        <div class="card-block px-2">
          <table class="table table-striped">
            <thead class="thead-dark">
              <tr>
                <th scope="col">Rank</th>
                <th scope="col">Name</th>
                <th scope="col">Stock Symbol</th>
                <th scope="col">Stock Price ($)</th>
                <th scope="col">Market Value ($)</th>
              </tr>
            </thead>
            <tbody>
              {% for company in paginated_companies %}
              <tr>
                <th scope="col">{{ forloop.counter }}</th>
                <th scope="col">{{ company.name }}</th>
                <td>{{ company.stock_symbol }}</td>
                <td>$ {{ company.stocks_data.quote.latestPrice }}</td>
                <td>$ {{ company.market_value | intword }}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
{#          <p class="card-text">Description</p>#}
{#          <a href="#" class="btn btn-primary">Website</a>#}
        </div>
{#        <div class="w-100"></div>#}
        {#    <div class="card-footer w-100 text-muted">#}
        {#        Potential future footer#}
        {#    </div>#}
      </div>
      {% if is_paginated %}
        <ul class="pagination">
        {% if page_obj.has_previous %}
            <li>
                <span><a href="?page={{ page_obj.previous_page_number }}">Previous</a></span>
            </li>
        {% endif %}
            <li class="">
                <span>Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.</span>
            </li>
        {% if page_obj.has_next %}
            <li>
                <span><a href="?page={{ page_obj.next_page_number }}">Next</a></span>
            </li>
        {% endif %}
        </ul>
        {% else %}
            <p>Not yet available</p>
      {% endif %}
  </div>



{% endblock content %}